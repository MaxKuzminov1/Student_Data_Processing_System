# Student Data Processing System

Система для обработки и распространения данных о студентах через ZeroMQ.

## Обзор

Проект состоит из двух основных компонентов:
- **Сервер** - мониторит файлы с данными студентов, обрабатывает и публикует через ZeroMQ
- **Клиент** - подключается к серверу и отображает полученные данные в табличном формате

## Структура проекта

```
project/
├── common/              # Общие компоненты
│   ├── student.hpp/cpp  # Класс Student с валидацией
│   ├── serializer.hpp/cpp # Сериализация в JSON
│   ├── zmq_publisher.hpp/cpp # ZeroMQ издатель
│   └── zmq_subscriber.hpp/cpp # ZeroMQ подписчик
├── server/              # Серверная часть
│   ├── main_server.cpp  # Главный сервер
│   ├── data_parser.hpp/cpp # Парсер файлов
│   └── data_manager.hpp/cpp # Обработка данных
├── client/              # Клиентская часть
│   └── main_client.cpp  # Главный клиент
├── test/                # Тесты
│   ├── student_test.cpp # Тесты Student
│   ├── data_parser_test.cpp # Тесты парсера
│   ├── data_manager_test.cpp # Тесты менеджера
│   ├── serializer_unit_test.cpp # Тесты сериализации
│   └── zmq_network_test.cpp # Тесты сети
└── database/            # Директория с файлами данных
```

## Компоненты

### Student
- Хранит данные студента (ID, имя, фамилия, дата рождения)
- Валидация данных и формата дат
- Поддержка сравнения и сортировки

### Serializer
- Преобразование объектов Student в JSON и обратно
- Валидация JSON структуры
- Поддержка сериализации списков студентов

### ZeroMQ компоненты
- **Publisher** - асинхронная отправка данных
- **Subscriber** - получение и обработка сообщений
- Очереди сообщений для надежной доставки

### Data Parser
- Чтение данных из текстовых файлов
- Обработка различных форматов данных
- Валидация и очистка входных данных

### Data Manager
- Объединение данных из разных источников
- Удаление дубликатов
- Сортировка и фильтрация студентов

## Сборка и запуск

### Зависимости
- CMake 3.10+
- ZeroMQ
- nlohmann/json

### Сборка
```bash
mkdir build && cd build
cmake ..
make
```

### Запуск сервера
```bash
./server/student_server
```

### Запуск клиента
```bash
./client/student_client
```

### Параметры командной строки
**Клиент:**
- `-s, --server` - адрес сервера (по умолчанию: tcp://localhost:5556)
- `-h, --help` - справка

## Формат данных

### Файлы данных
Файлы в формате: `student_file_*.txt`
```
ID Фамилия Имя ДатаРождения
```

Пример:
```
1 Иванов Иван 01.01.1990
2 Петров Петр 15.05.1991
```

### JSON формат
```json
{
    "students": [
        {
            "id": 1,
            "first_name": "Иван",
            "last_name": "Иванов",
            "birth_date": "01.01.1990"
        }
    ]
}
```

## Команды клиента

- `p/print` - показать текущие данные
- `s/status` - показать статус подключения  
- `q/quit` - выход

## Тестирование

### Запуск всех тестов
```bash
make run_all_tests
```

## Особенности

- Автоматическое обнаружение изменений в файлах
- Валидация данных на всех этапах
- Асинхронная обработка сообщений
- Поддержка длинных имен и специальных символов
- Статистика обработки и доставки данных

## Протокол связи

Используется ZeroMQ PUB-SUB паттерн:
- Порт по умолчанию: 5556
- Формат сообщений: JSON
- Автоматическая реконнект при обрыве связи

Последовательность событий
- Запуск сервера → Привязка к tcp://*:5556
- Запуск клиента → Подключение к tcp://localhost:5556
- Обнаружение изменений в файловой системе
- Обработка данных (парсинг, фильтрация, дедупликация)
- Сериализация в JSON формат
- Отправка через ZeroMQ Publisher
- Получение клиентом через ZeroMQ Subscriber
- Десериализация JSON в объекты Student
- Отображение данных в табличном формате